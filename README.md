# AHU Campus Network Auto-Login | 校园网自动登录脚本

这是一个专为安徽大学（及类似 Dr.COM/ePortal 认证系统）设计的校园网自动保活脚本。

它能够全天候监控网络状态，在检测到断网时自动后台静默登录，并在网络通畅时进入休眠模式，极低占用系统资源。

## ✨ 主要功能

* **静默运行**：使用 `.pyw` 后缀，后台无窗口运行，不干扰正常工作。
* **智能检测**：通过 Ping 检测网络连通性（宽松模式，防止网络抖动误报）。
* **断网急救**：一旦检测到断网，自动获取本机内网 IP 并尝试重连，直到网络恢复。
* **日志记录**：关键操作（启动、断网、重连成功）会记录在 `D:\Autologin\run_log.txt` 中。

## 📂 项目结构

请确保你的本地文件结构如下：

```text
D:\Autologin\
├── autologin.pyw      # [核心脚本] 负责检测网络和执行登录
├── run_log.txt        # [自动生成] 运行日志文件
└── boot_wifi.bat      # [引导脚本] 用于放入启动文件夹，开机唤醒核心脚本

## 🚀安装与配置（必读）
第一步：环境准备
确保你的电脑已安装 Python 3.x，并安装了 requests 库：

Bash
pip install requests
第二步：部署文件
注意：本脚本默认路径硬编码为 D 盘，请严格按照以下步骤操作：

在 D盘 根目录下创建一个新文件夹，命名为 Autologin。

将下载的 autologin.pyw 文件放入 D:\Autologin\ 文件夹中。

第三步：修改账号密码
右键点击 D:\Autologin\autologin.pyw，选择用 IDLE 或 记事本/VSCode 打开。

找到顶部的 配置区域，填入你的学号和密码：

Python
# ================= 配置区域 =================
BASE_URL = "[http://172.16.253.3:801/eportal/](http://172.16.253.3:801/eportal/)" # 登录接口
ACCOUNT = "E24201038"       # <--- 请修改为你的学号
PASSWORD = "YOUR_PASSWORD"  # <--- 请修改为你的密码
# ===========================================
保存并关闭文件。

第四步：设置开机自启
为了让脚本开机自动运行，我们需要使用 boot_wifi.bat。

关于 boot_wifi.bat：
这是一个批处理引导文件。它的作用是告诉 Windows 在开机时调用 pythonw.exe（无窗口模式）来运行位于 D 盘的脚本。

操作方法：

按下键盘上的 Win + R 键，输入 shell:startup 并回车。

这将打开 Windows 的“启动”文件夹。

将项目中的 boot_wifi.bat 文件复制（或剪切）到这个文件夹中。

## ⚠️ 常见问题与排查
1. 网页无法刷新 / 脚本提示网络不通但无法登录？
如果你使用了 Clash / v2ray / NekoBox 等代理软件，可能会遇到这个问题。

原因：代理软件可能会拦截发往校园网认证服务器（如 172.16.253.3）的流量，导致脚本无法连接到登录接口。

解决方法：

临时测试：尝试暂时关闭系统代理，观察脚本是否能正常登录。

永久解决：在代理软件的设置中，确保开启了 "Bypass LAN" (绕过局域网)，或者将校园网 IP 段（172.16.0.0/16）加入到直连白名单中。

注：如果代理开启且网络正常，则无需理会。

2. 如何查看脚本是否在运行？
脚本是静默运行的，不会有窗口。

你可以打开 D:\Autologin\run_log.txt 查看最新的日志时间戳。

或者在任务管理器中查找名为 pythonw.exe 的进程。

## 📜 免责声明
本脚本仅供学习交流使用，请勿用于非法用途。请妥善保管包含账号密码的脚本文件。
